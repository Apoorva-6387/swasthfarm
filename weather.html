<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poultry Weather Analysis System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', 'Noto Sans Devanagari', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .weather-card { transition: all 0.3s ease; }
        .weather-card:hover { transform: translateY(-8px); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .glass-card { background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%); backdrop-filter: blur(15px); }
        .risk-low { background: linear-gradient(135deg, #10b981, #34d399); }
        .risk-medium { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
        .risk-high { background: linear-gradient(135deg, #ef4444, #f87171); }
        .risk-critical { background: linear-gradient(135deg, #7c2d12, #dc2626); }
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex justify-center items-center mb-4">
                <div class="bg-white rounded-full p-1 shadow-lg">
                    <button onclick="toggleLanguage()" id="langToggle" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full font-medium transition-all duration-300 hover:from-blue-600 hover:to-purple-700">
                        üåê English | ‡§π‡§ø‡§Ç‡§¶‡•Ä
                    </button>
                </div>
            </div>
            <div class="gradient-bg rounded-2xl p-8 text-white shadow-2xl">
                <h1 id="mainTitle" class="text-5xl font-bold mb-3">üå§Ô∏è Poultry Weather Analysis</h1>
                <p id="mainSubtitle" class="text-xl opacity-90">7-Day Weather Forecast & Risk Assessment for Poultry Farming</p>
            </div>
        </div>

        <!-- Location Input -->
        <div class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
            <h2 id="locationTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-8">Enter Your Farm Location</h2>
            <div class="flex flex-col md:flex-row gap-4 items-center justify-center">
                <input type="text" id="locationInput" value="Kanpur" placeholder="Enter city name (e.g., Mumbai, Delhi)" 
                       class="flex-1 max-w-md px-6 py-4 border-2 border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/80 backdrop-blur-sm text-lg">
                <button onclick="getWeatherForecast()" id="fetchBtn" 
                        class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 text-lg">
                    üåç <span id="fetchBtnText">Get Weather Forecast</span>
                </button>
            </div>
        </div>

        <!-- Optimal Temperature Guide -->
        <div class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
            <h2 id="tempGuideTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-8">üå°Ô∏è Optimal Poultry House Temperature Guide</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-6 border-2 border-yellow-200">
                    <div class="text-center">
                        <div class="text-4xl mb-3">üê£</div>
                        <h3 id="chickTitle" class="font-bold text-lg text-orange-800 mb-2">Day-Old Chicks</h3>
                        <div class="text-2xl font-bold text-orange-700 mb-2">32-35¬∞C</div>
                        <p id="chickDesc" class="text-sm text-gray-700">Critical first week temperature for survival</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200">
                    <div class="text-center">
                        <div class="text-4xl mb-3">üêî</div>
                        <h3 id="broilerTitle" class="font-bold text-lg text-green-800 mb-2">Broilers (Adult)</h3>
                        <div class="text-2xl font-bold text-green-700 mb-2">18-24¬∞C</div>
                        <p id="broilerDesc" class="text-sm text-gray-700">Optimal for growth and feed conversion</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-blue-50 to-cyan-100 rounded-xl p-6 border-2 border-blue-200">
                    <div class="text-center">
                        <div class="text-4xl mb-3">ü•ö</div>
                        <h3 id="layerTitle" class="font-bold text-lg text-blue-800 mb-2">Layers</h3>
                        <div class="text-2xl font-bold text-blue-700 mb-2">16-22¬∞C</div>
                        <p id="layerDesc" class="text-sm text-gray-700">Best for egg production and shell quality</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200">
                    <div class="text-center">
                        <div class="text-4xl mb-3">‚ö†Ô∏è</div>
                        <h3 id="dangerTitle" class="font-bold text-lg text-purple-800 mb-2">Danger Zone</h3>
                        <div class="text-2xl font-bold text-red-700 mb-2">&gt;30¬∞C</div>
                        <p id="dangerDesc" class="text-sm text-gray-700">Heat stress begins, immediate action needed</p>
                    </div>
                </div>
            </div>
            
            <!-- Temperature Management Tips -->
            <div class="mt-8 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border-2 border-indigo-200">
                <h3 id="tipsTitle" class="text-xl font-bold text-indigo-800 mb-4 flex items-center">
                    üí° <span id="tempTipsText">Temperature Management Tips</span>
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-3">
                        <div class="flex items-start gap-3">
                            <span class="text-xl">üå°Ô∏è</span>
                            <div>
                                <div id="tip1Title" class="font-semibold text-gray-800">Monitor Continuously</div>
                                <div id="tip1Desc" class="text-sm text-gray-600">Use digital thermometers with alarms</div>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-xl">üí®</span>
                            <div>
                                <div id="tip2Title" class="font-semibold text-gray-800">Proper Ventilation</div>
                                <div id="tip2Desc" class="text-sm text-gray-600">Ensure air circulation without drafts</div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-start gap-3">
                            <span class="text-xl">üíß</span>
                            <div>
                                <div id="tip3Title" class="font-semibold text-gray-800">Water Cooling</div>
                                <div id="tip3Desc" class="text-sm text-gray-600">Use misting systems in hot weather</div>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-xl">üè†</span>
                            <div>
                                <div id="tip4Title" class="font-semibold text-gray-800">Insulation</div>
                                <div id="tip4Desc" class="text-sm text-gray-600">Proper insulation maintains stable temperature</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="hidden text-center py-16">
            <div class="loading-spinner w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"></div>
            <p id="loadingText" class="text-xl text-gray-600">Analyzing weather conditions for your poultry farm...</p>
        </div>

        <!-- Room Temperature Management System -->
        <div class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
            <h2 id="roomTempTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-8">üè† Room Temperature Management</h2>
            
            <!-- Current Room Conditions Input -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border-2 border-blue-200">
                    <h3 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                        üå°Ô∏è <span id="currentConditionsText">Current Room Conditions</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label id="roomTempLabel" class="block text-sm font-medium text-gray-700 mb-2">Room Temperature (¬∞C)</label>
                            <input type="number" id="roomTempInput" placeholder="25" min="-10" max="50" step="0.1"
                                   class="w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white text-lg text-center font-bold">
                        </div>
                        <div>
                            <label id="roomHumidityLabel" class="block text-sm font-medium text-gray-700 mb-2">Room Humidity (%)</label>
                            <input type="number" id="roomHumidityInput" placeholder="65" min="0" max="100" step="1"
                                   class="w-full px-4 py-3 border-2 border-blue-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white text-lg text-center font-bold">
                        </div>
                        <div id="tempGauge" class="mt-6 p-4 bg-white rounded-xl shadow-sm">
                            <div class="text-center">
                                <div class="text-sm font-medium text-gray-600 mb-2">Temperature Status</div>
                                <div id="tempStatus" class="text-lg font-bold">Enter temperature above</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border-2 border-green-200">
                    <h3 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                        üêî <span id="poultryTypeText">Select Poultry Type</span>
                    </h3>
                    <div class="space-y-3">
                        <label class="flex items-center p-3 bg-white rounded-xl cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="poultryType" value="layers" class="mr-3 text-green-600">
                            <div class="flex-1">
                                <div class="font-medium text-gray-800">ü•ö Egg Production (Layers)</div>
                                <div class="text-sm text-gray-600">Optimal: 16-22¬∞C | Humidity: 50-70%</div>
                            </div>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-xl cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="poultryType" value="chicks" class="mr-3 text-green-600">
                            <div class="flex-1">
                                <div class="font-medium text-gray-800">üê£ Day-Old Chicks</div>
                                <div class="text-sm text-gray-600">Optimal: 32-35¬∞C | Humidity: 55-65%</div>
                            </div>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-xl cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="poultryType" value="broilers" class="mr-3 text-green-600">
                            <div class="flex-1">
                                <div class="font-medium text-gray-800">üêî Adult Birds (Broilers)</div>
                                <div class="text-sm text-gray-600">Optimal: 18-24¬∞C | Humidity: 50-70%</div>
                            </div>
                        </label>
                    </div>
                    <button onclick="getAIRecommendations()" id="getRecommendationsBtn" 
                            class="w-full mt-4 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                        ü§ñ <span id="getAIRecommendationsText">Get AI Recommendations</span>
                    </button>
                </div>
            </div>
            
            <!-- Productivity Optimization Guide -->
            <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border-2 border-purple-200 mb-6">
                <h3 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                    üìà <span id="productivityGuideText">Productivity Optimization Guide</span>
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-xl p-4 shadow-sm">
                        <div class="text-center mb-3">
                            <div class="text-2xl mb-2">ü•ö</div>
                            <div class="font-bold text-gray-800">Layers (Egg Production)</div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div><strong>Temperature:</strong> 16-22¬∞C</div>
                            <div><strong>Humidity:</strong> 50-70%</div>
                            <div><strong>Impact:</strong> Optimal egg size & shell quality</div>
                            <div class="text-xs text-gray-600">Above 25¬∞C: Reduced egg size, thin shells</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-4 shadow-sm">
                        <div class="text-center mb-3">
                            <div class="text-2xl mb-2">üê£</div>
                            <div class="font-bold text-gray-800">Day-Old Chicks</div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div><strong>Temperature:</strong> 32-35¬∞C</div>
                            <div><strong>Humidity:</strong> 55-65%</div>
                            <div><strong>Impact:</strong> Critical for survival</div>
                            <div class="text-xs text-gray-600">Below 30¬∞C: High mortality risk</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-4 shadow-sm">
                        <div class="text-center mb-3">
                            <div class="text-2xl mb-2">üêî</div>
                            <div class="font-bold text-gray-800">Adult Broilers</div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div><strong>Temperature:</strong> 18-24¬∞C</div>
                            <div><strong>Humidity:</strong> 50-70%</div>
                            <div><strong>Impact:</strong> Best feed conversion</div>
                            <div class="text-xs text-gray-600">Above 28¬∞C: Reduced feed intake</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI Recommendations Display -->
            <div id="aiRecommendations" class="hidden bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl p-6 border-2 border-indigo-200">
                <h3 class="text-xl font-bold text-indigo-800 mb-4 flex items-center">
                    ü§ñ <span id="aiRecommendationsTitle">AI-Powered Recommendations</span>
                </h3>
                <div id="aiRecommendationsContent" class="space-y-4">
                    <!-- AI recommendations will be populated here -->
                </div>
            </div>
        </div>

        <!-- Weather Forecast Display -->
        <div id="weatherDisplay" class="hidden fade-in">
            <!-- Current Conditions Summary -->
            <div id="currentSummary" class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
                <h2 id="summaryTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-6">Current Farm Conditions</h2>
                <div id="summaryContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
            </div>

            <!-- 7-Day Temperature Tracking -->
            <div class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
                <h2 id="tempTrackingTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-8">üìä 7-Day Room Temperature Tracking</h2>
                
                <!-- Temperature Input Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-4 mb-8">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border-2 border-blue-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-blue-800">Day 1 (Today)</div>
                            <div class="text-xs text-gray-600" id="day1Date"></div>
                        </div>
                        <input type="number" id="day1Temp" placeholder="25.0" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-blue-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day1Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4 border-2 border-green-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-green-800">Day 2</div>
                            <div class="text-xs text-gray-600" id="day2Date"></div>
                        </div>
                        <input type="number" id="day2Temp" placeholder="24.5" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-green-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-green-500 focus:border-green-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day2Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-4 border-2 border-purple-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-purple-800">Day 3</div>
                            <div class="text-xs text-gray-600" id="day3Date"></div>
                        </div>
                        <input type="number" id="day3Temp" placeholder="26.0" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-purple-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day3Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-4 border-2 border-yellow-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-yellow-800">Day 4</div>
                            <div class="text-xs text-gray-600" id="day4Date"></div>
                        </div>
                        <input type="number" id="day4Temp" placeholder="23.5" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-yellow-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day4Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-red-50 to-pink-100 rounded-xl p-4 border-2 border-red-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-red-800">Day 5</div>
                            <div class="text-xs text-gray-600" id="day5Date"></div>
                        </div>
                        <input type="number" id="day5Temp" placeholder="27.0" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-red-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-red-500 focus:border-red-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day5Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-100 rounded-xl p-4 border-2 border-indigo-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-indigo-800">Day 6</div>
                            <div class="text-xs text-gray-600" id="day6Date"></div>
                        </div>
                        <input type="number" id="day6Temp" placeholder="22.0" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-indigo-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day6Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                    <div class="bg-gradient-to-br from-teal-50 to-cyan-100 rounded-xl p-4 border-2 border-teal-200">
                        <div class="text-center mb-3">
                            <div class="font-bold text-teal-800">Day 7</div>
                            <div class="text-xs text-gray-600" id="day7Date"></div>
                        </div>
                        <input type="number" id="day7Temp" placeholder="24.0" step="0.1" min="-10" max="50"
                               class="w-full px-3 py-2 border border-teal-300 rounded-lg text-center font-bold focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                        <div class="text-xs text-center mt-2 text-gray-600">¬∞C</div>
                        <div id="day7Status" class="text-xs text-center mt-1 font-medium"></div>
                    </div>
                </div>
                
                <!-- Temperature Analysis Button -->
                <div class="text-center mb-6">
                    <button onclick="analyzeWeeklyTemperature()" id="analyzeWeeklyBtn" 
                            class="bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white px-8 py-3 rounded-xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                        üìä <span id="analyzeWeeklyText">Analyze Weekly Temperature Pattern</span>
                    </button>
                </div>
                
                <!-- Weekly Analysis Results -->
                <div id="weeklyAnalysisResults" class="hidden space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-xl p-6 shadow-sm border-2 border-blue-200">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üìä</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Average Temperature</div>
                                <div id="avgTemp" class="text-2xl font-bold text-blue-700">--¬∞C</div>
                                <div id="avgTempStatus" class="text-xs text-gray-500 mt-1">--</div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border-2 border-green-200">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üìà</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Temperature Trend</div>
                                <div id="tempTrend" class="text-lg font-bold text-green-700">--</div>
                                <div id="tempVariation" class="text-xs text-gray-500 mt-1">--</div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border-2 border-red-200">
                            <div class="text-center">
                                <div class="text-3xl mb-2">‚ö†Ô∏è</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Risk Assessment</div>
                                <div id="weeklyRisk" class="text-lg font-bold text-red-700">--</div>
                                <div id="riskDays" class="text-xs text-gray-500 mt-1">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7-Day Forecast -->
            <div class="glass-card rounded-2xl shadow-2xl p-8 mb-8 border border-white/20">
                <h2 id="forecastTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-8">7-Day Poultry Weather Forecast</h2>
                <div id="forecastGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
            </div>

            <!-- Risk Analysis -->
            <div class="glass-card rounded-2xl shadow-2xl p-8 border border-white/20">
                <h2 id="riskTitle" class="text-3xl font-bold text-center bg-gradient-to-r from-red-600 to-orange-600 bg-clip-text text-transparent mb-8">Poultry Risk Analysis & Recommendations</h2>
                <div id="riskAnalysis" class="space-y-6"></div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = localStorage.getItem('preferredLanguage') || localStorage.getItem('language') || 'hi';
        const GEMINI_API_KEY = 'AIzaSyClic_G3hl5cgL8uCXq0zD8pE3tpAKw4mM';

        // Language translations
        const translations = {
            en: {
                mainTitle: "üå§Ô∏è Poultry Weather Analysis",
                mainSubtitle: "7-Day Weather Forecast & Risk Assessment for Poultry Farming",
                locationTitle: "Enter Your Farm Location",
                fetchBtnText: "Get Weather Forecast",
                loadingText: "Analyzing weather conditions for your poultry farm...",
                summaryTitle: "Current Farm Conditions",
                forecastTitle: "7-Day Poultry Weather Forecast",
                riskTitle: "Poultry Risk Analysis & Recommendations",
                enterLocation: "Please enter a location",
                errorFetch: "Error fetching weather data. Please try again.",
                temperature: "Temperature",
                humidity: "Humidity", 
                windSpeed: "Wind Speed",
                precipitation: "Precipitation",
                riskLevel: "Risk Level",
                recommendations: "Recommendations",
                low: "Low",
                medium: "Medium",
                high: "High",
                critical: "Critical",
                tempGuideTitle: "üå°Ô∏è Optimal Poultry House Temperature Guide",
                chickTitle: "Day-Old Chicks",
                chickDesc: "Critical first week temperature for survival",
                broilerTitle: "Broilers (Adult)",
                broilerDesc: "Optimal for growth and feed conversion",
                layerTitle: "Layers",
                layerDesc: "Best for egg production and shell quality",
                dangerTitle: "Danger Zone",
                dangerDesc: "Heat stress begins, immediate action needed",
                tempTipsText: "Temperature Management Tips",
                tip1Title: "Monitor Continuously",
                tip1Desc: "Use digital thermometers with alarms",
                tip2Title: "Proper Ventilation",
                tip2Desc: "Ensure air circulation without drafts",
                tip3Title: "Water Cooling",
                tip3Desc: "Use misting systems in hot weather",
                tip4Title: "Insulation",
                tip4Desc: "Proper insulation maintains stable temperature",
                roomTempTitle: "üè† Room Temperature Management",
                currentConditionsText: "Current Room Conditions",
                roomTempLabel: "Room Temperature (¬∞C)",
                roomHumidityLabel: "Room Humidity (%)",
                poultryTypeText: "Select Poultry Type",
                getAIRecommendationsText: "Get AI Recommendations",
                productivityGuideText: "Productivity Optimization Guide",
                aiRecommendationsTitle: "AI-Powered Recommendations",
                tempTrackingTitle: "üìä 7-Day Room Temperature Tracking",
                analyzeWeeklyText: "Analyze Weekly Temperature Pattern"
            },
            hi: {
                mainTitle: "üå§Ô∏è ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§Æ‡•å‡§∏‡§Æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
                mainSubtitle: "‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§ï‡•á ‡§≤‡§ø‡§è 7-‡§¶‡§ø‡§® ‡§ï‡§æ ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®",
                locationTitle: "‡§Ö‡§™‡§®‡•á ‡§´‡§æ‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                fetchBtnText: "‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç",
                loadingText: "‡§Ü‡§™‡§ï‡•á ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§´‡§æ‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
                summaryTitle: "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§´‡§æ‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç",
                forecastTitle: "7-‡§¶‡§ø‡§® ‡§ï‡§æ ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®",
                riskTitle: "‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç",
                enterLocation: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§∏‡•ç‡§•‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                errorFetch: "‡§Æ‡•å‡§∏‡§Æ ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
                temperature: "‡§§‡§æ‡§™‡§Æ‡§æ‡§®",
                humidity: "‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ",
                windSpeed: "‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø",
                precipitation: "‡§µ‡§∞‡•ç‡§∑‡§æ",
                riskLevel: "‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞",
                recommendations: "‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç",
                low: "‡§ï‡§Æ",
                medium: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ",
                high: "‡§â‡§ö‡•ç‡§ö",
                critical: "‡§ó‡§Ç‡§≠‡•Ä‡§∞",
                tempGuideTitle: "üå°Ô∏è ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§ò‡§∞ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§ó‡§æ‡§á‡§°",
                chickTitle: "‡§®‡§µ‡§ú‡§æ‡§§ ‡§ö‡•Ç‡§ú‡•á",
                chickDesc: "‡§ú‡•Ä‡§µ‡§ø‡§§ ‡§∞‡§π‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§π‡§≤‡•á ‡§∏‡§™‡•ç‡§§‡§æ‡§π ‡§ï‡§æ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§§‡§æ‡§™‡§Æ‡§æ‡§®",
                broilerTitle: "‡§¨‡•ç‡§∞‡•â‡§Ø‡§≤‡§∞ (‡§µ‡§Ø‡§∏‡•ç‡§ï)",
                broilerDesc: "‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§î‡§∞ ‡§´‡•Ä‡§° ‡§∞‡•Ç‡§™‡§æ‡§Ç‡§§‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§¶‡§∞‡•ç‡§∂",
                layerTitle: "‡§≤‡•á‡§Ø‡§∞",
                layerDesc: "‡§Ö‡§Ç‡§°‡§æ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§î‡§∞ ‡§ñ‡•ã‡§≤ ‡§ï‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ",
                dangerTitle: "‡§ñ‡§§‡§∞‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞",
                dangerDesc: "‡§ó‡§∞‡•ç‡§Æ‡•Ä ‡§ï‡§æ ‡§§‡§®‡§æ‡§µ ‡§∂‡•Å‡§∞‡•Ç, ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï",
                tempTipsText: "‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ",
                tip1Title: "‡§®‡§ø‡§∞‡§Ç‡§§‡§∞ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä",
                tip1Desc: "‡§Ö‡§≤‡§æ‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§•‡§∞‡•ç‡§Æ‡§æ‡§Æ‡•Ä‡§ü‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç",
                tip2Title: "‡§â‡§ö‡§ø‡§§ ‡§µ‡•á‡§Ç‡§ü‡§ø‡§≤‡•á‡§∂‡§®",
                tip2Desc: "‡§°‡•ç‡§∞‡§æ‡§´‡•ç‡§ü ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§π‡§µ‡§æ ‡§ï‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
                tip3Title: "‡§™‡§æ‡§®‡•Ä ‡§∏‡•á ‡§†‡§Ç‡§°‡§ï",
                tip3Desc: "‡§ó‡§∞‡•ç‡§Æ ‡§Æ‡•å‡§∏‡§Æ ‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç",
                tip4Title: "‡§á‡§®‡•ç‡§∏‡•Å‡§≤‡•á‡§∂‡§®",
                tip4Desc: "‡§â‡§ö‡§ø‡§§ ‡§á‡§®‡•ç‡§∏‡•Å‡§≤‡•á‡§∂‡§® ‡§∏‡•ç‡§•‡§ø‡§∞ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à",
                roomTempTitle: "üè† ‡§ï‡§Æ‡§∞‡•á ‡§ï‡§æ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®",
                currentConditionsText: "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§ï‡§Æ‡§∞‡•á ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç",
                roomTempLabel: "‡§ï‡§Æ‡§∞‡•á ‡§ï‡§æ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® (¬∞C)",
                roomHumidityLabel: "‡§ï‡§Æ‡§∞‡•á ‡§ï‡•Ä ‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ (%)",
                poultryTypeText: "‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",
                getAIRecommendationsText: "AI ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç",
                productivityGuideText: "‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§ï‡§§‡§æ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤‡§® ‡§ó‡§æ‡§á‡§°",
                aiRecommendationsTitle: "AI-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç",
                tempTrackingTitle: "üìä 7-‡§¶‡§ø‡§® ‡§ï‡§Æ‡§∞‡•á ‡§ï‡§æ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó",
                analyzeWeeklyText: "‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç"
            }
        };

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
            document.getElementById('locationTitle').textContent = t.locationTitle;
            document.getElementById('fetchBtnText').textContent = t.fetchBtnText;
            document.getElementById('loadingText').textContent = t.loadingText;
            
            // Update temperature guide elements
            const tempGuideTitle = document.getElementById('tempGuideTitle');
            if (tempGuideTitle) tempGuideTitle.textContent = t.tempGuideTitle || "üå°Ô∏è Optimal Poultry House Temperature Guide";
            
            // Update temperature guide elements safely
            const tempElements = [
                'chickTitle', 'chickDesc', 'broilerTitle', 'broilerDesc',
                'layerTitle', 'layerDesc', 'dangerTitle', 'dangerDesc',
                'tempTipsText', 'tip1Title', 'tip1Desc', 'tip2Title',
                'tip2Desc', 'tip3Title', 'tip3Desc', 'tip4Title', 'tip4Desc',
                'roomTempTitle', 'currentConditionsText', 'roomTempLabel', 'roomHumidityLabel',
                'poultryTypeText', 'getAIRecommendationsText', 'productivityGuideText',
                'aiRecommendationsTitle', 'tempTrackingTitle', 'analyzeWeeklyText'
            ];
            
            tempElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && t[elementId]) {
                    element.textContent = t[elementId];
                }
            });
            
            // Update other elements if they exist
            const summaryTitle = document.getElementById('summaryTitle');
            if (summaryTitle) summaryTitle.textContent = t.summaryTitle;
            
            const forecastTitle = document.getElementById('forecastTitle');
            if (forecastTitle) forecastTitle.textContent = t.forecastTitle;
            
            const riskTitle = document.getElementById('riskTitle');
            if (riskTitle) riskTitle.textContent = t.riskTitle;
        }

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguage();
            initializeDateLabels();
            setupTemperatureMonitoring();
        });

        function initializeDateLabels() {
            const today = new Date();
            for (let i = 1; i <= 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + (i - 1));
                const dateElement = document.getElementById(`day${i}Date`);
                if (dateElement) {
                    dateElement.textContent = date.toLocaleDateString(currentLanguage === 'hi' ? 'hi-IN' : 'en-US', {
                        month: 'short',
                        day: 'numeric'
                    });
                }
            }
        }

        function setupTemperatureMonitoring() {
            // Add event listeners for room temperature inputs
            const roomTempInput = document.getElementById('roomTempInput');
            const roomHumidityInput = document.getElementById('roomHumidityInput');
            
            if (roomTempInput) {
                roomTempInput.addEventListener('input', updateTemperatureStatus);
            }
            if (roomHumidityInput) {
                roomHumidityInput.addEventListener('input', updateTemperatureStatus);
            }

            // Add event listeners for 7-day temperature inputs
            for (let i = 1; i <= 7; i++) {
                const tempInput = document.getElementById(`day${i}Temp`);
                if (tempInput) {
                    tempInput.addEventListener('input', () => updateDayStatus(i));
                }
            }
        }

        function updateTemperatureStatus() {
            const temp = parseFloat(document.getElementById('roomTempInput').value);
            const humidity = parseFloat(document.getElementById('roomHumidityInput').value);
            const tempStatus = document.getElementById('tempStatus');
            
            if (isNaN(temp)) {
                tempStatus.textContent = 'Enter temperature above';
                tempStatus.className = 'text-lg font-bold text-gray-500';
                return;
            }

            let status = '';
            let className = 'text-lg font-bold ';
            
            if (temp < 10) {
                status = 'ü•∂ Too Cold - Risk of Cold Stress';
                className += 'text-blue-600';
            } else if (temp >= 10 && temp < 16) {
                status = '‚ùÑÔ∏è Cold - May Need Heating';
                className += 'text-blue-500';
            } else if (temp >= 16 && temp <= 24) {
                status = currentLanguage === 'hi' ? '‚úÖ ‡§á‡§∑‡•ç‡§ü‡§§‡§Æ ‡§∏‡•Ä‡§Æ‡§æ' : '‚úÖ Optimal Range';
                className += 'text-green-600';
            } else if (temp > 24 && temp <= 30) {
                status = '‚ö†Ô∏è Warm - Monitor Birds';
                className += 'text-yellow-600';
            } else if (temp > 30 && temp <= 35) {
                status = 'üî• Hot - Heat Stress Risk';
                className += 'text-orange-600';
            } else {
                status = 'üö® Critical - Immediate Action';
                className += 'text-red-600';
            }
            
            tempStatus.textContent = status;
            tempStatus.className = className;
        }

        function updateDayStatus(day) {
            const tempInput = document.getElementById(`day${day}Temp`);
            const statusElement = document.getElementById(`day${day}Status`);
            const temp = parseFloat(tempInput.value);
            
            if (isNaN(temp)) {
                statusElement.textContent = '';
                return;
            }

            let status = '';
            let className = 'text-xs text-center mt-1 font-medium ';
            
            if (temp < 16) {
                status = 'Cold';
                className += 'text-blue-600';
            } else if (temp >= 16 && temp <= 24) {
                status = 'Optimal';
                className += 'text-green-600';
            } else if (temp > 24 && temp <= 30) {
                status = 'Warm';
                className += 'text-yellow-600';
            } else {
                status = 'Hot';
                className += 'text-red-600';
            }
            
            statusElement.textContent = status;
            statusElement.className = className;
        }

        async function getAIRecommendations() {
            const roomTemp = document.getElementById('roomTempInput').value;
            const roomHumidity = document.getElementById('roomHumidityInput').value;
            const selectedType = document.querySelector('input[name="poultryType"]:checked');
            
            if (!roomTemp || !roomHumidity || !selectedType) {
                alert('Please enter room temperature, humidity, and select poultry type');
                return;
            }

            const aiRecommendations = document.getElementById('aiRecommendations');
            const aiContent = document.getElementById('aiRecommendationsContent');
            
            // Show loading
            aiContent.innerHTML = `
                <div class="text-center py-8">
                    <div class="loading-spinner w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full mx-auto mb-4"></div>
                    <p class="text-indigo-600 font-medium">AI is analyzing your conditions...</p>
                </div>
            `;
            aiRecommendations.classList.remove('hidden');

            try {
                const recommendations = await fetchAIRecommendations(roomTemp, roomHumidity, selectedType.value);
                displayAIRecommendations(recommendations);
            } catch (error) {
                console.error('Error getting AI recommendations:', error);
                aiContent.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-red-600 text-lg font-medium">Error getting recommendations</div>
                        <p class="text-gray-600">Please try again later</p>
                    </div>
                `;
            }
        }

        async function fetchAIRecommendations(temperature, humidity, poultryType) {
            const typeDetails = {
                layers: { 
                    name: currentLanguage === 'hi' ? '‡§Ö‡§Ç‡§°‡•á ‡§¶‡•á‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§Æ‡•Å‡§∞‡•ç‡§ó‡§ø‡§Ø‡§æ‡§Ç (‡§≤‡•á‡§Ø‡§∞)' : 'Egg-laying hens (Layers)', 
                    optimalTemp: '16-22¬∞C', 
                    optimalHumidity: '50-70%' 
                },
                chicks: { 
                    name: currentLanguage === 'hi' ? '‡§®‡§µ‡§ú‡§æ‡§§ ‡§ö‡•Ç‡§ú‡•á' : 'Day-old chicks', 
                    optimalTemp: '32-35¬∞C', 
                    optimalHumidity: '55-65%' 
                },
                broilers: { 
                    name: currentLanguage === 'hi' ? '‡§µ‡§Ø‡§∏‡•ç‡§ï ‡§¨‡•ç‡§∞‡•â‡§Ø‡§≤‡§∞ ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•á' : 'Adult broiler chickens', 
                    optimalTemp: '18-24¬∞C', 
                    optimalHumidity: '50-70%' 
                }
            };

            const prompt = currentLanguage === 'hi' ? 
            `‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç:

            ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡§æ‡§Ç:
            - ‡§ï‡§Æ‡§∞‡•á ‡§ï‡§æ ‡§§‡§æ‡§™‡§Æ‡§æ‡§®: ${temperature}¬∞C
            - ‡§ï‡§Æ‡§∞‡•á ‡§ï‡•Ä ‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ: ${humidity}%
            - ‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä ‡§™‡§æ‡§≤‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: ${typeDetails[poultryType].name}
            - ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§∏‡•Ä‡§Æ‡§æ: ${typeDetails[poultryType].optimalTemp}
            - ‡§Ü‡§¶‡§∞‡•ç‡§∂ ‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ ‡§∏‡•Ä‡§Æ‡§æ: ${typeDetails[poultryType].optimalHumidity}

            ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç:
            1. ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® (‡§Ö‡§ö‡•ç‡§õ‡§æ/‡§ö‡§ø‡§Ç‡§§‡§æ‡§ú‡§®‡§ï/‡§ó‡§Ç‡§≠‡•Ä‡§∞)
            2. ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§ú‡•ã‡§ñ‡§ø‡§Æ
            3. ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à (‡§Ø‡§¶‡§ø ‡§ï‡•ã‡§à ‡§π‡•ã)
            4. ‡§â‡§™‡§ï‡§∞‡§£ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç (‡§π‡•Ä‡§ü‡§ø‡§Ç‡§ó/‡§ï‡•Ç‡§≤‡§ø‡§Ç‡§ó/‡§µ‡•á‡§Ç‡§ü‡§ø‡§≤‡•á‡§∂‡§®)
            5. ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∏‡•Å‡§ù‡§æ‡§µ
            6. ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§ï‡§§‡§æ/‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§™‡§∞ ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ
            7. ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ

            JSON ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç:
            {
                "assessment": "‡§Ö‡§ö‡•ç‡§õ‡§æ/‡§ö‡§ø‡§Ç‡§§‡§æ‡§ú‡§®‡§ï/‡§ó‡§Ç‡§≠‡•Ä‡§∞",
                "riskLevel": "‡§ï‡§Æ/‡§Æ‡§ß‡•ç‡§Ø‡§Æ/‡§â‡§ö‡•ç‡§ö/‡§ó‡§Ç‡§≠‡•Ä‡§∞",
                "immediateActions": ["‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à1", "‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à2"],
                "equipmentRecommendations": ["‡§â‡§™‡§ï‡§∞‡§£1", "‡§â‡§™‡§ï‡§∞‡§£2"],
                "monitoringTips": ["‡§∏‡•Å‡§ù‡§æ‡§µ1", "‡§∏‡•Å‡§ù‡§æ‡§µ2"],
                "productivityImpact": "‡§µ‡§ø‡§µ‡§∞‡§£",
                "longTermTips": ["‡§∏‡•Å‡§ù‡§æ‡§µ1", "‡§∏‡•Å‡§ù‡§æ‡§µ2"],
                "summary": "‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂"
            }` :
            `As a poultry farming expert, analyze the following conditions and provide detailed recommendations:

            Current Conditions:
            - Room Temperature: ${temperature}¬∞C
            - Room Humidity: ${humidity}%
            - Poultry Type: ${typeDetails[poultryType].name}
            - Optimal Temperature Range: ${typeDetails[poultryType].optimalTemp}
            - Optimal Humidity Range: ${typeDetails[poultryType].optimalHumidity}

            Please provide:
            1. Immediate Assessment (Good/Concerning/Critical)
            2. Specific risks based on current conditions
            3. Immediate actions needed (if any)
            4. Equipment recommendations (heating/cooling/ventilation)
            5. Monitoring suggestions
            6. Expected impact on productivity/health
            7. Long-term management tips

            Format as JSON:
            {
                "assessment": "Good/Concerning/Critical",
                "riskLevel": "Low/Medium/High/Critical",
                "immediateActions": ["action1", "action2"],
                "equipmentRecommendations": ["equipment1", "equipment2"],
                "monitoringTips": ["tip1", "tip2"],
                "productivityImpact": "description",
                "longTermTips": ["tip1", "tip2"],
                "summary": "brief overall summary"
            }`;

            const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-goog-api-key': GEMINI_API_KEY
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }]
                })
            });

            const data = await response.json();
            const responseText = data.candidates[0].content.parts[0].text;
            
            // Extract JSON from the response
            const jsonMatch = responseText.match(/\{[\s\S]*\}/);
            if (jsonMatch) {
                return JSON.parse(jsonMatch[0]);
            } else {
                throw new Error('Invalid response format');
            }
        }

        function displayAIRecommendations(recommendations) {
            const aiContent = document.getElementById('aiRecommendationsContent');
            
            const riskColors = {
                'Low': 'green', '‡§ï‡§Æ': 'green',
                'Medium': 'yellow', '‡§Æ‡§ß‡•ç‡§Ø‡§Æ': 'yellow',
                'High': 'orange', '‡§â‡§ö‡•ç‡§ö': 'orange',
                'Critical': 'red', '‡§ó‡§Ç‡§≠‡•Ä‡§∞': 'red'
            };
            
            const riskColor = riskColors[recommendations.riskLevel] || 'gray';
            
            const labels = currentLanguage === 'hi' ? {
                overallAssessment: '‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®',
                riskLevel: '‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞',
                immediateActions: '‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à',
                equipmentRecommendations: '‡§â‡§™‡§ï‡§∞‡§£ ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç',
                monitoringGuidelines: '‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂',
                productivityImpact: '‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§ï‡§§‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ',
                longTermTips: '‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§∏‡•Å‡§ù‡§æ‡§µ'
            } : {
                overallAssessment: 'Overall Assessment',
                riskLevel: 'Risk Level',
                immediateActions: 'Immediate Actions Required',
                equipmentRecommendations: 'Equipment Recommendations',
                monitoringGuidelines: 'Monitoring Guidelines',
                productivityImpact: 'Expected Productivity Impact',
                longTermTips: 'Long-term Management Tips'
            };
            
            aiContent.innerHTML = `
                <!-- Assessment Summary -->
                <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-${riskColor}-500">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800">${labels.overallAssessment}</h4>
                        <span class="bg-${riskColor}-100 text-${riskColor}-800 px-3 py-1 rounded-full text-sm font-bold">
                            ${recommendations.assessment}
                        </span>
                    </div>
                    <p class="text-gray-700">${recommendations.summary}</p>
                    <div class="mt-3">
                        <span class="text-sm font-medium text-gray-600">${labels.riskLevel}: </span>
                        <span class="bg-${riskColor}-500 text-white px-2 py-1 rounded text-sm font-bold">
                            ${recommendations.riskLevel}
                        </span>
                    </div>
                </div>

                <!-- Immediate Actions -->
                ${recommendations.immediateActions.length > 0 ? `
                <div class="bg-red-50 rounded-xl p-6 shadow-sm border-2 border-red-200">
                    <h4 class="text-lg font-bold text-red-800 mb-4 flex items-center">
                        üö® ${labels.immediateActions}
                    </h4>
                    <ul class="space-y-2">
                        ${recommendations.immediateActions.map(action => `
                            <li class="flex items-start gap-3">
                                <span class="text-red-600 font-bold">‚Ä¢</span>
                                <span class="text-gray-700">${action}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                ` : ''}

                <!-- Equipment Recommendations -->
                <div class="bg-blue-50 rounded-xl p-6 shadow-sm border-2 border-blue-200">
                    <h4 class="text-lg font-bold text-blue-800 mb-4 flex items-center">
                        üõ†Ô∏è ${labels.equipmentRecommendations}
                    </h4>
                    <ul class="space-y-2">
                        ${recommendations.equipmentRecommendations.map(equipment => `
                            <li class="flex items-start gap-3">
                                <span class="text-blue-600 font-bold">‚Ä¢</span>
                                <span class="text-gray-700">${equipment}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>

                <!-- Monitoring Tips -->
                <div class="bg-green-50 rounded-xl p-6 shadow-sm border-2 border-green-200">
                    <h4 class="text-lg font-bold text-green-800 mb-4 flex items-center">
                        üëÅÔ∏è ${labels.monitoringGuidelines}
                    </h4>
                    <ul class="space-y-2">
                        ${recommendations.monitoringTips.map(tip => `
                            <li class="flex items-start gap-3">
                                <span class="text-green-600 font-bold">‚Ä¢</span>
                                <span class="text-gray-700">${tip}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>

                <!-- Productivity Impact -->
                <div class="bg-purple-50 rounded-xl p-6 shadow-sm border-2 border-purple-200">
                    <h4 class="text-lg font-bold text-purple-800 mb-4 flex items-center">
                        üìà ${labels.productivityImpact}
                    </h4>
                    <p class="text-gray-700">${recommendations.productivityImpact}</p>
                </div>

                <!-- Long-term Tips -->
                <div class="bg-yellow-50 rounded-xl p-6 shadow-sm border-2 border-yellow-200">
                    <h4 class="text-lg font-bold text-yellow-800 mb-4 flex items-center">
                        üí° ${labels.longTermTips}
                    </h4>
                    <ul class="space-y-2">
                        ${recommendations.longTermTips.map(tip => `
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-600 font-bold">‚Ä¢</span>
                                <span class="text-gray-700">${tip}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }

        function analyzeWeeklyTemperature() {
            const temperatures = [];
            let hasData = false;
            
            for (let i = 1; i <= 7; i++) {
                const temp = parseFloat(document.getElementById(`day${i}Temp`).value);
                if (!isNaN(temp)) {
                    temperatures.push(temp);
                    hasData = true;
                } else {
                    temperatures.push(null);
                }
            }
            
            if (!hasData) {
                alert('Please enter at least one temperature value');
                return;
            }
            
            const validTemps = temperatures.filter(t => t !== null);
            const avgTemp = validTemps.reduce((sum, temp) => sum + temp, 0) / validTemps.length;
            const minTemp = Math.min(...validTemps);
            const maxTemp = Math.max(...validTemps);
            const tempVariation = maxTemp - minTemp;
            
            // Determine trend
            const firstTemp = temperatures.find(t => t !== null);
            const lastTemp = temperatures.slice().reverse().find(t => t !== null);
            let trend = 'Stable';
            if (lastTemp > firstTemp + 1) trend = 'Rising';
            else if (lastTemp < firstTemp - 1) trend = 'Falling';
            
            // Risk assessment
            let riskLevel = 'Low';
            let riskDays = 0;
            validTemps.forEach(temp => {
                if (temp < 16 || temp > 30) riskDays++;
            });
            
            if (riskDays >= 4) riskLevel = 'High';
            else if (riskDays >= 2) riskLevel = 'Medium';
            
            // Update display
            document.getElementById('avgTemp').textContent = `${avgTemp.toFixed(1)}¬∞C`;
            document.getElementById('avgTempStatus').textContent = avgTemp >= 16 && avgTemp <= 24 ? (currentLanguage==='hi'?'‡§á‡§∑‡•ç‡§ü‡§§‡§Æ ‡§∏‡•Ä‡§Æ‡§æ':'Optimal Range') : (currentLanguage==='hi'?'‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ':'Needs Attention');
            document.getElementById('tempTrend').textContent = trend;
            document.getElementById('tempVariation').textContent = `${currentLanguage==='hi'?'‡§µ‡§ø‡§µ‡§ø‡§ß‡§§‡§æ:':'Variation:'} ${tempVariation.toFixed(1)}¬∞C`;
            document.getElementById('weeklyRisk').textContent = riskLevel;
            document.getElementById('riskDays').textContent = `${riskDays}/7 ${currentLanguage==='hi'?'‡§¶‡§ø‡§® ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•á‡§Ç':'days at risk'}`;
            
            document.getElementById('weeklyAnalysisResults').classList.remove('hidden');
        }

        async function getWeatherForecast() {
            const location = document.getElementById('locationInput').value.trim();
            if (!location) {
                alert(translations[currentLanguage].enterLocation);
                return;
            }

            // Show loading
            document.getElementById('loadingIndicator').classList.remove('hidden');
            document.getElementById('weatherDisplay').classList.add('hidden');

            try {
                const weatherData = await fetchWeatherData(location);
                displayWeatherForecast(weatherData);
                document.getElementById('loadingIndicator').classList.add('hidden');
                document.getElementById('weatherDisplay').classList.remove('hidden');
            } catch (error) {
                console.error('Error:', error);
                alert(translations[currentLanguage].errorFetch);
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        async function fetchWeatherData(location) {
            const prompt = `Provide a detailed 7-day weather forecast for ${location} with the following information for each day:
            - Date
            - Temperature (high/low in Celsius)
            - Humidity percentage
            - Wind speed (km/h)
            - Precipitation chance and amount
            - Weather condition (sunny, cloudy, rainy, etc.)
            - UV index
            
            Also provide current weather conditions.
            
            Format the response as a JSON object with:
            {
                "location": "${location}",
                "current": {
                    "temperature": number,
                    "humidity": number,
                    "windSpeed": number,
                    "condition": "string",
                    "uvIndex": number
                },
                "forecast": [
                    {
                        "date": "YYYY-MM-DD",
                        "day": "Monday",
                        "tempHigh": number,
                        "tempLow": number,
                        "humidity": number,
                        "windSpeed": number,
                        "precipitationChance": number,
                        "precipitationAmount": number,
                        "condition": "string",
                        "uvIndex": number
                    }
                ]
            }`;

            const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-goog-api-key': GEMINI_API_KEY
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }]
                })
            });

            const data = await response.json();
            const weatherText = data.candidates[0].content.parts[0].text;
            
            // Extract JSON from the response
            const jsonMatch = weatherText.match(/\{[\s\S]*\}/);
            if (jsonMatch) {
                return JSON.parse(jsonMatch[0]);
            } else {
                throw new Error('Invalid response format');
            }
        }

        function displayWeatherForecast(weatherData) {
            displayCurrentSummary(weatherData.current, weatherData.location);
            displayForecastGrid(weatherData.forecast);
            displayRiskAnalysis(weatherData.forecast);
        }

        function displayCurrentSummary(current, location) {
            const container = document.getElementById('summaryContent');
            const t = translations[currentLanguage];
            
            container.innerHTML = `
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 text-center">
                    <div class="text-3xl mb-2">üå°Ô∏è</div>
                    <div class="text-sm font-bold text-gray-600 uppercase">${t.temperature}</div>
                    <div class="text-2xl font-bold text-blue-800">${current.temperature}¬∞C</div>
                </div>
                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 text-center">
                    <div class="text-3xl mb-2">üíß</div>
                    <div class="text-sm font-bold text-gray-600 uppercase">${t.humidity}</div>
                    <div class="text-2xl font-bold text-green-800">${current.humidity}%</div>
                </div>
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 text-center">
                    <div class="text-3xl mb-2">üí®</div>
                    <div class="text-sm font-bold text-gray-600 uppercase">${t.windSpeed}</div>
                    <div class="text-2xl font-bold text-purple-800">${current.windSpeed} km/h</div>
                </div>
                <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-6 text-center">
                    <div class="text-3xl mb-2">${getWeatherEmoji(current.condition)}</div>
                    <div class="text-sm font-bold text-gray-600 uppercase">Condition</div>
                    <div class="text-lg font-bold text-yellow-800">${current.condition}</div>
                </div>
            `;
        }

        function displayForecastGrid(forecast) {
            const container = document.getElementById('forecastGrid');
            
            container.innerHTML = forecast.map((day, index) => {
                const riskLevel = calculatePoultryRisk(day);
                const riskClass = `risk-${riskLevel.toLowerCase()}`;
                
                return `
                    <div class="weather-card bg-white rounded-2xl p-6 shadow-lg border-2 border-gray-100">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">${getWeatherEmoji(day.condition)}</div>
                            <div class="font-bold text-lg text-gray-800">${day.day}</div>
                            <div class="text-sm text-gray-600">${formatDate(day.date)}</div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-600">Temp:</span>
                                <span class="font-bold">${day.tempHigh}¬∞/${day.tempLow}¬∞C</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-600">Humidity:</span>
                                <span class="font-bold">${day.humidity}%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-600">Wind:</span>
                                <span class="font-bold">${day.windSpeed} km/h</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-600">Rain:</span>
                                <span class="font-bold">${day.precipitationChance}%</span>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="${riskClass} text-white px-3 py-2 rounded-full text-center font-bold text-sm">
                                ${translations[currentLanguage].riskLevel}: ${translations[currentLanguage][riskLevel.toLowerCase()]}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function displayRiskAnalysis(forecast) {
            const container = document.getElementById('riskAnalysis');
            const t = translations[currentLanguage];
            
            const overallRisk = calculateOverallRisk(forecast);
            const recommendations = generateRecommendations(forecast);
            const weeklyAnalysis = generateWeeklyAnalysis(forecast);
            const criticalDays = identifyCriticalDays(forecast);
            
            container.innerHTML = `
                <!-- Weekly Overview Analysis -->
                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-8 border-2 border-indigo-200 mb-8">
                    <h3 class="text-2xl font-bold text-indigo-800 mb-6 flex items-center">
                        üìä 7-Day Weather Impact Analysis
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üå°Ô∏è</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Avg Temperature</div>
                                <div class="text-2xl font-bold text-indigo-700">${weeklyAnalysis.avgTemp}¬∞C</div>
                                <div class="text-xs text-gray-500 mt-1">${weeklyAnalysis.tempTrend}</div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üíß</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Avg Humidity</div>
                                <div class="text-2xl font-bold text-blue-700">${weeklyAnalysis.avgHumidity}%</div>
                                <div class="text-xs text-gray-500 mt-1">${weeklyAnalysis.humidityStatus}</div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <div class="text-center">
                                <div class="text-3xl mb-2">‚ö†Ô∏è</div>
                                <div class="text-sm font-bold text-gray-600 uppercase">Risk Days</div>
                                <div class="text-2xl font-bold text-red-700">${criticalDays.length}/7</div>
                                <div class="text-xs text-gray-500 mt-1">${criticalDays.length > 3 ? 'High Alert Week' : criticalDays.length > 1 ? 'Moderate Risk' : 'Low Risk Week'}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Critical Days Alert -->
                ${criticalDays.length > 0 ? `
                <div class="bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl p-8 border-2 border-red-200 mb-8">
                    <h3 class="text-2xl font-bold text-red-800 mb-6 flex items-center">
                        üö® Critical Days Alert
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${criticalDays.map(day => `
                            <div class="bg-white rounded-xl p-4 border-l-4 border-red-500 shadow-sm">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="font-bold text-gray-800">${day.day}</div>
                                    <div class="risk-${day.riskLevel.toLowerCase()} text-white px-2 py-1 rounded text-xs font-bold">
                                        ${translations[currentLanguage][day.riskLevel.toLowerCase()]}
                                    </div>
                                </div>
                                <div class="text-sm text-gray-600 space-y-1">
                                    <div>üå°Ô∏è ${day.tempHigh}¬∞/${day.tempLow}¬∞C</div>
                                    <div>üíß ${day.humidity}% humidity</div>
                                    <div class="text-red-600 font-medium">${day.primaryRisk}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                ` : ''}

                <!-- Detailed Risk Assessment -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="bg-gradient-to-br from-red-50 to-orange-50 rounded-2xl p-8 border-2 border-red-100">
                        <h3 class="text-2xl font-bold text-red-800 mb-6 flex items-center">
                            ‚ö†Ô∏è Overall Risk Assessment
                        </h3>
                        <div class="space-y-4">
                            ${overallRisk.map(risk => `
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-gray-800">${risk.factor}</span>
                                        <span class="risk-${risk.level.toLowerCase()} text-white px-3 py-1 rounded-full text-sm font-bold">
                                            ${translations[currentLanguage][risk.level.toLowerCase()]}
                                        </span>
                                    </div>
                                    <div class="text-sm text-gray-600">${risk.description}</div>
                                    <div class="text-xs text-gray-500 mt-1">Impact: ${risk.impact}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8 border-2 border-green-100">
                        <h3 class="text-2xl font-bold text-green-800 mb-6 flex items-center">
                            üí° ${t.recommendations}
                        </h3>
                        <div class="space-y-4">
                            ${recommendations.map(rec => `
                                <div class="flex items-start gap-3 p-4 bg-white rounded-xl shadow-sm">
                                    <div class="text-2xl">${rec.icon}</div>
                                    <div class="flex-1">
                                        <div class="font-bold text-gray-800 mb-1">${rec.title}</div>
                                        <div class="text-gray-600 text-sm mb-2">${rec.description}</div>
                                        <div class="text-xs text-blue-600 font-medium">Priority: ${rec.priority}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <!-- Daily Risk Breakdown -->
                <div class="bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-8 border-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        üìÖ Daily Risk Breakdown
                    </h3>
                    <div class="space-y-4">
                        ${forecast.map((day, index) => {
                            const dayRisk = calculatePoultryRisk(day);
                            const dayRecommendations = getDaySpecificRecommendations(day);
                            return `
                                <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-${dayRisk.toLowerCase() === 'low' ? 'green' : dayRisk.toLowerCase() === 'medium' ? 'yellow' : dayRisk.toLowerCase() === 'high' ? 'orange' : 'red'}-500">
                                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
                                        <div class="flex items-center gap-4">
                                            <div class="text-2xl">${getWeatherEmoji(day.condition)}</div>
                                            <div>
                                                <div class="font-bold text-lg text-gray-800">${day.day}</div>
                                                <div class="text-sm text-gray-600">${formatDate(day.date)}</div>
                                            </div>
                                        </div>
                                        <div class="risk-${dayRisk.toLowerCase()} text-white px-4 py-2 rounded-full font-bold text-sm mt-2 md:mt-0">
                                            Risk: ${translations[currentLanguage][dayRisk.toLowerCase()]}
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        <div class="text-center">
                                            <div class="text-xs text-gray-500 uppercase">Temperature</div>
                                            <div class="font-bold">${day.tempHigh}¬∞/${day.tempLow}¬∞C</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-xs text-gray-500 uppercase">Humidity</div>
                                            <div class="font-bold">${day.humidity}%</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-xs text-gray-500 uppercase">Wind</div>
                                            <div class="font-bold">${day.windSpeed} km/h</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-xs text-gray-500 uppercase">Rain</div>
                                            <div class="font-bold">${day.precipitationChance}%</div>
                                        </div>
                                    </div>
                                    
                                    ${dayRecommendations.length > 0 ? `
                                    <div class="border-t pt-4">
                                        <div class="text-sm font-medium text-gray-700 mb-2">Daily Actions:</div>
                                        <div class="flex flex-wrap gap-2">
                                            ${dayRecommendations.map(rec => `
                                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium">
                                                    ${rec}
                                                </span>
                                            `).join('')}
                                        </div>
                                    </div>
                                    ` : ''}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function calculatePoultryRisk(day) {
            let riskScore = 0;
            
            // Temperature risk
            if (day.tempHigh > 35 || day.tempLow < 5) riskScore += 3;
            else if (day.tempHigh > 30 || day.tempLow < 10) riskScore += 2;
            else if (day.tempHigh > 25) riskScore += 1;
            
            // Humidity risk
            if (day.humidity > 80 || day.humidity < 40) riskScore += 2;
            else if (day.humidity > 70 || day.humidity < 50) riskScore += 1;
            
            // Wind risk
            if (day.windSpeed > 25) riskScore += 2;
            else if (day.windSpeed > 15) riskScore += 1;
            
            // Precipitation risk
            if (day.precipitationChance > 70) riskScore += 2;
            else if (day.precipitationChance > 40) riskScore += 1;
            
            if (riskScore >= 6) return 'Critical';
            if (riskScore >= 4) return 'High';
            if (riskScore >= 2) return 'Medium';
            return 'Low';
        }

        function calculateOverallRisk(forecast) {
            const avgTemp = forecast.reduce((sum, day) => sum + day.tempHigh, 0) / forecast.length;
            const avgHumidity = forecast.reduce((sum, day) => sum + day.humidity, 0) / forecast.length;
            const maxWind = Math.max(...forecast.map(day => day.windSpeed));
            const avgRain = forecast.reduce((sum, day) => sum + day.precipitationChance, 0) / forecast.length;
            
            return [
                {
                    factor: 'Heat Stress Risk',
                    level: avgTemp > 32 ? 'High' : avgTemp > 28 ? 'Medium' : 'Low',
                    description: avgTemp > 32 ? 'Extreme temperatures can cause panting, reduced feed intake, and mortality' : 
                                avgTemp > 28 ? 'Moderate heat stress may reduce egg production and growth rates' : 
                                'Temperature within comfortable range for poultry',
                    impact: avgTemp > 32 ? 'Mortality risk, reduced productivity' : 
                           avgTemp > 28 ? 'Decreased performance' : 'Optimal conditions'
                },
                {
                    factor: 'Respiratory Issues',
                    level: avgHumidity > 75 ? 'High' : avgHumidity > 65 ? 'Medium' : 'Low',
                    description: avgHumidity > 75 ? 'High humidity promotes bacterial growth and respiratory diseases' : 
                                avgHumidity > 65 ? 'Elevated humidity may cause mild respiratory stress' : 
                                'Humidity levels support healthy respiratory function',
                    impact: avgHumidity > 75 ? 'Disease outbreaks, poor air quality' : 
                           avgHumidity > 65 ? 'Mild respiratory stress' : 'Good air quality'
                },
                {
                    factor: 'Structural Damage',
                    level: maxWind > 30 ? 'High' : maxWind > 20 ? 'Medium' : 'Low',
                    description: maxWind > 30 ? 'Strong winds can damage coops and stress birds' : 
                                maxWind > 20 ? 'Moderate winds may cause minor structural issues' : 
                                'Wind speeds pose minimal threat to structures',
                    impact: maxWind > 30 ? 'Structural damage, bird stress' : 
                           maxWind > 20 ? 'Minor maintenance needed' : 'No structural concerns'
                },
                {
                    factor: 'Disease Outbreak',
                    level: avgRain > 60 && avgHumidity > 70 ? 'High' : avgRain > 40 ? 'Medium' : 'Low',
                    description: avgRain > 60 && avgHumidity > 70 ? 'Wet conditions with high humidity create ideal disease environment' : 
                                avgRain > 40 ? 'Increased moisture may elevate disease risk' : 
                                'Weather conditions do not significantly increase disease risk',
                    impact: avgRain > 60 && avgHumidity > 70 ? 'High disease transmission risk' : 
                           avgRain > 40 ? 'Moderate disease risk' : 'Low disease risk'
                }
            ];
        }

        function generateRecommendations(forecast) {
            const recommendations = [];
            const avgTemp = forecast.reduce((sum, day) => sum + day.tempHigh, 0) / forecast.length;
            const avgHumidity = forecast.reduce((sum, day) => sum + day.humidity, 0) / forecast.length;
            const maxWind = Math.max(...forecast.map(day => day.windSpeed));
            const avgRain = forecast.reduce((sum, day) => sum + day.precipitationChance, 0) / forecast.length;
            
            if (avgTemp > 30) {
                recommendations.push({
                    icon: 'üå°Ô∏è',
                    title: 'Heat Management',
                    description: 'Increase ventilation, provide shade, ensure adequate water supply, consider misting systems',
                    priority: avgTemp > 35 ? 'Critical' : 'High'
                });
            }
            
            if (avgHumidity > 70) {
                recommendations.push({
                    icon: 'üí®',
                    title: 'Humidity Control',
                    description: 'Improve air circulation, check drainage systems, monitor for respiratory issues',
                    priority: avgHumidity > 80 ? 'High' : 'Medium'
                });
            }
            
            if (maxWind > 25) {
                recommendations.push({
                    icon: 'üè†',
                    title: 'Structural Safety',
                    description: 'Secure loose equipment, check roof integrity, ensure proper shelter for birds',
                    priority: maxWind > 35 ? 'Critical' : 'High'
                });
            }
            
            if (avgRain > 50) {
                recommendations.push({
                    icon: '‚òî',
                    title: 'Wet Weather Prep',
                    description: 'Improve drainage, increase bedding frequency, monitor for fungal infections',
                    priority: avgRain > 70 ? 'High' : 'Medium'
                });
            }
            
            recommendations.push({
                icon: 'üçΩÔ∏è',
                title: 'Feed Management',
                description: 'Adjust feed quantities based on temperature, store feed in dry conditions',
                priority: avgTemp > 32 || avgTemp < 15 ? 'High' : 'Medium'
            });
            
            recommendations.push({
                icon: 'üíä',
                title: 'Health Monitoring',
                description: 'Increase health checks, prepare emergency medications, monitor mortality rates',
                priority: 'Medium'
            });
            
            if (avgTemp > 25 && avgHumidity > 65) {
                recommendations.push({
                    icon: 'üíß',
                    title: 'Water Management',
                    description: 'Ensure constant fresh water supply, clean waterers daily, add electrolytes if needed',
                    priority: 'High'
                });
            }
            
            if (avgTemp < 18) {
                recommendations.push({
                    icon: 'üî•',
                    title: 'Heating Systems',
                    description: 'Check heating equipment, provide extra bedding, monitor for cold stress',
                    priority: avgTemp < 10 ? 'Critical' : 'High'
                });
            }
            
            return recommendations;
        }

        function generateWeeklyAnalysis(forecast) {
            const avgTemp = Math.round(forecast.reduce((sum, day) => sum + day.tempHigh, 0) / forecast.length);
            const avgHumidity = Math.round(forecast.reduce((sum, day) => sum + day.humidity, 0) / forecast.length);
            
            const tempTrend = forecast[6].tempHigh > forecast[0].tempHigh ? 'Rising trend' : 
                             forecast[6].tempHigh < forecast[0].tempHigh ? 'Falling trend' : 'Stable';
            
            const humidityStatus = avgHumidity > 75 ? 'Too High' : 
                                  avgHumidity > 65 ? 'Elevated' : 
                                  avgHumidity < 40 ? 'Too Low' : 'Optimal';
            
            return {
                avgTemp,
                avgHumidity,
                tempTrend,
                humidityStatus
            };
        }

        function identifyCriticalDays(forecast) {
            return forecast.filter(day => {
                const risk = calculatePoultryRisk(day);
                return risk === 'High' || risk === 'Critical';
            }).map(day => ({
                ...day,
                riskLevel: calculatePoultryRisk(day),
                primaryRisk: getPrimaryRisk(day)
            }));
        }

        function getPrimaryRisk(day) {
            if (day.tempHigh > 35) return 'Extreme heat stress';
            if (day.tempLow < 5) return 'Cold stress risk';
            if (day.humidity > 80) return 'High humidity stress';
            if (day.windSpeed > 30) return 'Strong wind damage';
            if (day.precipitationChance > 70) return 'Heavy rain risk';
            if (day.tempHigh > 30 && day.humidity > 70) return 'Heat + humidity stress';
            return 'Multiple risk factors';
        }

        function getDaySpecificRecommendations(day) {
            const recommendations = [];
            
            if (day.tempHigh > 32) {
                recommendations.push('Increase ventilation', 'Provide extra water', 'Monitor for heat stress');
            }
            if (day.tempLow < 10) {
                recommendations.push('Check heating', 'Add bedding', 'Monitor for cold stress');
            }
            if (day.humidity > 75) {
                recommendations.push('Improve air circulation', 'Check for respiratory issues');
            }
            if (day.windSpeed > 25) {
                recommendations.push('Secure equipment', 'Check structural integrity');
            }
            if (day.precipitationChance > 60) {
                recommendations.push('Improve drainage', 'Increase bedding changes', 'Monitor for diseases');
            }
            
            return recommendations;
        }

        function getWeatherEmoji(condition) {
            const condition_lower = condition.toLowerCase();
            if (condition_lower.includes('sunny') || condition_lower.includes('clear')) return '‚òÄÔ∏è';
            if (condition_lower.includes('cloudy') || condition_lower.includes('overcast')) return '‚òÅÔ∏è';
            if (condition_lower.includes('rain') || condition_lower.includes('shower')) return 'üåßÔ∏è';
            if (condition_lower.includes('storm') || condition_lower.includes('thunder')) return '‚õàÔ∏è';
            if (condition_lower.includes('snow')) return '‚ùÑÔ∏è';
            if (condition_lower.includes('fog') || condition_lower.includes('mist')) return 'üå´Ô∏è';
            if (condition_lower.includes('wind')) return 'üí®';
            return 'üå§Ô∏è';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString(currentLanguage === 'hi' ? 'hi-IN' : 'en-US', {
                month: 'short',
                day: 'numeric'
            });
        }

        // Allow Enter key to trigger forecast
        document.getElementById('locationInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                getWeatherForecast();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97abf5fd27ad3e27',t:'MTc1NzE0MDY4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
